<div class="top">
  <app-topbar></app-topbar>
</div>
<hr />

<div class="section">
  <div class="card">
    <mat-card>
      <mat-card-content>
        <div class="head">
          <mat-card-title>
            <h2>Not Reached</h2>
          </mat-card-title>
        </div>
        <div class="body">
          <h1>{{ companiesNotReached.length }}</h1>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="card">
    <mat-card>
      <mat-card-content>
        <mat-card-title>
          <div class="head">
            <h2>Reached</h2>
          </div>
        </mat-card-title>
        <div class="body">
          <h1>{{ companiesReached.length }}</h1>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="card">
    <mat-card>
      <mat-card-content>
        <mat-card-title>
          <div class="head">
            <h2>Rejected</h2>
          </div>
        </mat-card-title>
        <div class="body">
          <h1>{{ companiesRejected.length }}</h1>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="card">
    <mat-card>
      <mat-card-content>
        <mat-card-title>
          <div class="head">
            <h2>Free credits onboarding</h2>
          </div>
        </mat-card-title>
        <div class="body">
          <h1>{{ companiesOnFreeCreditsOnboarding.length }}</h1>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="card">
    <mat-card>
      <mat-card-content>
        <mat-card-title>
          <div class="head">
            <h2>Onboarding</h2>
          </div>
        </mat-card-title>
        <div class="body">
          <h1>{{ companieOnboarding.length }}</h1>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<div class="header">
  <span class="search-bar">
    <span class="input">
      Search
      <input
        matInput
        placeholder="Search for Everything, Company Name, Company Email, Website, Contact. "
        type="search"
        [(ngModel)]="searchedValue"
        (input)="searchHandler()"
    /></span>
  </span>
  <span>
    <div class="span-buttons">
      <span
        ><button mat-raised-button (click)="startAddingCompany()" class="add">
          Add
        </button>
      </span>
      <span>
        <button mat-raised-button class="filter" [matMenuTriggerFor]="status">
          Filter
          <!-- <i class="material-icons">filter_list</i> -->
        </button>
        <mat-menu #mainMenu>
          <mat-select
            (opened)="(true)"
            [value]="allOption.value"
            disabled="true"
            hidden="true"
          >
            <mat-menu #status [class.mat-elevation-z8]="true">
              <mat-option value="All" (click)="filterAll()" #allOption>
                All
              </mat-option>
              <mat-option
                value="Not reached"
                (click)="filterCompaniesNotReached()"
              >
                Not reached
              </mat-option>
              <mat-option value="Reached" (click)="filterCompaniesReached()">
                Reached
              </mat-option>
              <mat-option
                value="Rejected"
                (click)="filterCompaniesThatRejected()"
              >
                Rejected
              </mat-option>
              <mat-option
                value="Free credits onboarding"
                (click)="filterCompaniesOnFreeCredit()"
              >
                Free credits onboarding
              </mat-option>
              <mat-option
                value="Onboarding"
                (click)="filterCompaniesOnboarding()"
              >
                <p>Onboarding</p>
              </mat-option>
            </mat-menu>
          </mat-select>
        </mat-menu>
      </span>
    </div>
  </span>
</div>

<hr />

<!-- <app-table></app-table> -->

<div class="container">
  <table mat-table [dataSource]="dataSource!" class="mat-elevation-z8">
    <div *ngIf="dataSource.length === 0">
      <h3>No information to show</h3>
    </div>
    <ng-container matColumnDef="companyName" *ngIf="dataSource.length > 0">
      <th mat-header-cell *matHeaderCellDef>Company Name</th>
      <td mat-cell *matCellDef="let company">{{ company.companyName }}</td>
    </ng-container>
    <ng-container matColumnDef="socialMediaLink">
      <th mat-header-cell *matHeaderCellDef>Social Media Link</th>
      <td mat-cell *matCellDef="let company">
        <a href="{{ company.socialMediaLink }}">{{
          company.socialMediaLink
        }}</a>
      </td>
    </ng-container>
    <ng-container matColumnDef="companyPhone">
      <th mat-header-cell *matHeaderCellDef>Phone</th>
      <td mat-cell *matCellDef="let company">{{ company.companyPhone }}</td>
    </ng-container>
    <ng-container matColumnDef="companyWebsite">
      <th mat-header-cell *matHeaderCellDef>Website</th>
      <td mat-cell *matCellDef="let company">
        {{ company.companyWebsite }}
      </td>
    </ng-container>
    <ng-container matColumnDef="contactEmail">
      <th mat-header-cell *matHeaderCellDef>Contact Email</th>
      <td mat-cell *matCellDef="let company">{{ company.contactEmail }}</td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let company">{{ company.status }}</td>
    </ng-container>

    <ng-container matColumnDef="view">
      <th mat-header-cell *matHeaderCellDef>View</th>
      <td mat-cell *matCellDef="let company">
        <button
          type="button"
          class="button-edit"
          mat-icon-button
          (click)="editCompanyDetails(company)"
        >
          <mat-icon>visibility</mat-icon>
        </button>
      </td>
    </ng-container>
    <ng-container matColumnDef="call">
      <th mat-header-cell *matHeaderCellDef>Call</th>
      <td mat-cell *matCellDef="let company">
        <button
          type="button"
          class="button-edit"
          mat-icon-button
          (click)="addCallNotes(company)"
        >
          <mat-icon>call</mat-icon>
        </button>
      </td>
    </ng-container>
    <ng-container matColumnDef="meeting">
      <th mat-header-cell *matHeaderCellDef>Meeting</th>
      <td mat-cell *matCellDef="let company">
        <button
          type="button"
          class="button-edit"
          mat-icon-button
          (click)="scheduleMeeting(company)"
        >
          <mat-icon>today</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
